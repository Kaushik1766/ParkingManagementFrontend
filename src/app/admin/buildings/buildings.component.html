<app-loader [isLoading]="isLoading" />
<div class="buildings-container">
  <p-toast />

  <!-- Header and Add Building Form -->
  <div class="header-section">
    <div class="header">
      <h1>Building Management</h1>
      <h2>Manage buildings, floors, and parking slots</h2>
    </div>

  </div>
  <div class="add-building-card">
    <h3>Add New Building</h3>

    <form [formGroup]="this.addBuildingForm" (ngSubmit)="onAddBuilding()" class="add-building-form">
      <div class="form-row">
        <p-floatlabel variant="on">
          <input
            pInputText
            id="buildingName"
            formControlName="buildingName"
            fluid />

          <label for="buildingName">Building Name</label>
        </p-floatlabel>

        <p-button
          type="submit"
          label="Add Building"
          icon="pi pi-plus"
          [disabled]="isBuildingNameInvalid"
          [loading]="isAddingBuilding">
        </p-button>
      </div>
    </form>
  </div>

  <!-- Buildings List -->
  <div class="buildings-list">
    @if (isLoading) {
      <div class="loading-state">
        <p-button loading="true" label="Loading buildings..." disabled></p-button>
      </div>
    }

    @if (!isLoading && buildings.length === 0) {
      <div class="empty-state">
        <h3>No Buildings Found</h3>
        <p>Create your first building using the form above.</p>
      </div>
    }

    @for (building of buildings; track building.buildingId) {
      <app-building-card [building]="building" />
    }
  </div>
</div>
